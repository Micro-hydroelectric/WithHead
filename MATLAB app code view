classdef withhead_app < matlab.apps.AppBase

    % Properties that correspond to app components
    properties (Access = public)
        UIFigure                     matlab.ui.Figure
        AveragePowerOutputEditField  matlab.ui.control.NumericEditField
        AveragePowerOutputEditFieldLabel  matlab.ui.control.Label
        CalculateAveragePowerOutputButton  matlab.ui.control.Button
        AverageFlowEditField         matlab.ui.control.NumericEditField
        AverageFlowEditFieldLabel    matlab.ui.control.Label
        EfficiencyEditField          matlab.ui.control.NumericEditField
        EfficiencyEditFieldLabel     matlab.ui.control.Label
        PlotButton                   matlab.ui.control.Button
        Q70flowEditField             matlab.ui.control.NumericEditField
        Q70flowEditFieldLabel        matlab.ui.control.Label
        Q10flowEditField             matlab.ui.control.NumericEditField
        Q10flowEditFieldLabel        matlab.ui.control.Label
        HeadEditField                matlab.ui.control.NumericEditField
        HeadEditFieldLabel           matlab.ui.control.Label
        UIAxes                       matlab.ui.control.UIAxes
    end

    % Callbacks that handle component events
    methods (Access = private)

        % Callback function
        function HeadEditFieldValueChanged(app, event)
         
            
        end

        % Callback function
        function Q10flowEditFieldValueChanged(app, event)
            
        end

        % Callback function
        function Q70flowEditFieldValueChanged(app, event)

            
        end

        % Callback function
        function RhoEditFieldValueChanged(app, event)
      
            
        end

        % Callback function
        function UIAxesButtonDown(app, event)
            
           
        end

        % Button pushed function: PlotButton
        function PlotButtonPushed(app, event)
            Q10Flow = app.Q10flowEditField.Value;
            Q70Flow = app.Q70flowEditField.Value;
            nElements = 20;
            stepSize = (Q70Flow-Q10Flow)/(nElements-1);
            Efficiency = app.EfficiencyEditField.Value;
            Flow = Q10Flow:stepSize:Q70Flow;
            Rho = 1000;
            Head = app.HeadEditField.Value;
g = 9.81;
Power = 0.5*Rho*g*Efficiency*Head.*Flow/1000;
y = Power;
plot(app.UIAxes, y);
end

% Button pushed function: CalculateAveragePowerOutputButton
function CalculateAveragePowerOutputButtonPushed(app, event)
AverageFlow = app.AverageFlowEditField.Value;
Rho = 1000;
Efficiency = app.EfficiencyEditField.Value;
g = 9.81;
Head = app.HeadEditField.Value;
AveragePower = 0.5*Rho*g*Efficiency*Head.*AverageFlow/1000;
app.AveragePowerOutputEditField.Value = AveragePower;
end
end

% Component initialization
methods (Access = private)

% Create UIFigure and components
function createComponents(app)

% Create UIFigure and hide until all components are created
app.UIFigure = uifigure('Visible', 'off');
app.UIFigure.Position = [100 100 640 480];
app.UIFigure.Name = 'MATLAB App';

% Create UIAxes
app.UIAxes = uiaxes(app.UIFigure);
title(app.UIAxes, 'Flow against Power Generation')
xlabel(app.UIAxes, 'Flow (m3/s)')
ylabel(app.UIAxes, 'Power Generated (kW)')
zlabel(app.UIAxes, 'Z')
app.UIAxes.FontName = 'Times New Roman';
app.UIAxes.XGrid = 'on';
app.UIAxes.YGrid = 'on';
app.UIAxes.FontSize = 16;
app.UIAxes.Position = [227 21 399 441];

% Create HeadEditFieldLabel
app.HeadEditFieldLabel = uilabel(app.UIFigure);
app.HeadEditFieldLabel.HorizontalAlignment = 'right';
app.HeadEditFieldLabel.FontName = 'Times New Roman';
app.HeadEditFieldLabel.FontSize = 16;
app.HeadEditFieldLabel.Position = [29 439 39 22];
app.HeadEditFieldLabel.Text = 'Head';

% Create HeadEditField
app.HeadEditField = uieditfield(app.UIFigure, 'numeric');
app.HeadEditField.FontName = 'Times New Roman';
app.HeadEditField.FontSize = 18;
app.HeadEditField.Position = [145 438 71 23];
app.HeadEditField.Value = 0.183;

% Create Q10flowEditFieldLabel
app.Q10flowEditFieldLabel = uilabel(app.UIFigure);
app.Q10flowEditFieldLabel.HorizontalAlignment = 'right';
app.Q10flowEditFieldLabel.FontName = 'Times New Roman';
app.Q10flowEditFieldLabel.FontSize = 16;
app.Q10flowEditFieldLabel.Position = [29 366 66 22];
app.Q10flowEditFieldLabel.Text = 'Q10 flow';

% Create Q10flowEditField
app.Q10flowEditField = uieditfield(app.UIFigure, 'numeric');
app.Q10flowEditField.FontName = 'Times New Roman';
app.Q10flowEditField.FontSize = 18;
app.Q10flowEditField.Position = [145 365 71 23];
app.Q10flowEditField.Value = 10;

% Create Q70flowEditFieldLabel
app.Q70flowEditFieldLabel = uilabel(app.UIFigure);
app.Q70flowEditFieldLabel.HorizontalAlignment = 'right';
app.Q70flowEditFieldLabel.FontName = 'Times New Roman';
app.Q70flowEditFieldLabel.FontSize = 16;
app.Q70flowEditFieldLabel.Position = [29 325 66 22];
app.Q70flowEditFieldLabel.Text = 'Q70 flow';

% Create Q70flowEditField
app.Q70flowEditField = uieditfield(app.UIFigure, 'numeric');
app.Q70flowEditField.FontName = 'Times New Roman';
app.Q70flowEditField.FontSize = 18;
app.Q70flowEditField.Position = [145 324 71 23];
app.Q70flowEditField.Value = 85;

% Create PlotButton
app.PlotButton = uibutton(app.UIFigure, 'push');
app.PlotButton.ButtonPushedFcn = createCallbackFcn(app, @PlotButtonPushed, true);
app.PlotButton.FontName = 'Times New Roman';
app.PlotButton.FontSize = 16;
app.PlotButton.Position = [25 278 178 30];
app.PlotButton.Text = 'Plot';

% Create EfficiencyEditFieldLabel
app.EfficiencyEditFieldLabel = uilabel(app.UIFigure);
app.EfficiencyEditFieldLabel.HorizontalAlignment = 'right';
app.EfficiencyEditFieldLabel.FontName = 'Times New Roman';
app.EfficiencyEditFieldLabel.FontSize = 16;
app.EfficiencyEditFieldLabel.Position = [29 401 72 22];
app.EfficiencyEditFieldLabel.Text = 'Efficiency';

% Create EfficiencyEditField
app.EfficiencyEditField = uieditfield(app.UIFigure, 'numeric');
app.EfficiencyEditField.FontName = 'Times New Roman';
app.EfficiencyEditField.FontSize = 18;
app.EfficiencyEditField.Position = [145 400 71 23];

% Create AverageFlowEditFieldLabel
app.AverageFlowEditFieldLabel = uilabel(app.UIFigure);
app.AverageFlowEditFieldLabel.HorizontalAlignment = 'right';
app.AverageFlowEditFieldLabel.FontName = 'Times New Roman';
app.AverageFlowEditFieldLabel.FontSize = 16;
app.AverageFlowEditFieldLabel.Position = [29 231 95 22];
app.AverageFlowEditFieldLabel.Text = 'Average Flow';

% Create AverageFlowEditField
app.AverageFlowEditField = uieditfield(app.UIFigure, 'numeric');
app.AverageFlowEditField.FontName = 'Times New Roman';
app.AverageFlowEditField.FontSize = 18;
app.AverageFlowEditField.Position = [145 231 71 23];

% Create CalculateAveragePowerOutputButton
app.CalculateAveragePowerOutputButton = uibutton(app.UIFigure, 'push');
app.CalculateAveragePowerOutputButton.ButtonPushedFcn = createCallbackFcn(app, @CalculateAveragePowerOutputButtonPushed, true);
app.CalculateAveragePowerOutputButton.WordWrap = 'on';
app.CalculateAveragePowerOutputButton.FontName = 'Times New Roman';
app.CalculateAveragePowerOutputButton.FontSize = 16;
app.CalculateAveragePowerOutputButton.Position = [23 142 196 54];
app.CalculateAveragePowerOutputButton.Text = 'Calculate Average Power Output';

% Create AveragePowerOutputEditFieldLabel
app.AveragePowerOutputEditFieldLabel = uilabel(app.UIFigure);
app.AveragePowerOutputEditFieldLabel.WordWrap = 'on';
app.AveragePowerOutputEditFieldLabel.FontName = 'Times New Roman';
app.AveragePowerOutputEditFieldLabel.FontSize = 16;
app.AveragePowerOutputEditFieldLabel.Position = [25 70 113 62];
app.AveragePowerOutputEditFieldLabel.Text = 'Average Power Output';

% Create AveragePowerOutputEditField
app.AveragePowerOutputEditField = uieditfield(app.UIFigure, 'numeric');
app.AveragePowerOutputEditField.FontName = 'Times New Roman';
app.AveragePowerOutputEditField.FontSize = 18;
app.AveragePowerOutputEditField.Position = [145 90 71 23];

% Show the figure after all components are created
app.UIFigure.Visible = 'on';
end
end

% App creation and deletion
methods (Access = public)

% Construct app
function app = withhead_app

% Create UIFigure and components
createComponents(app)

% Register the app with App Designer
registerApp(app, app.UIFigure)

if nargout == 0
clear app
end
end

% Code that executes before app deletion
function delete(app)

% Delete UIFigure when app is deleted
delete(app.UIFigure)
end
end
end
